import os
import imp
import json
import update_mongodb

def call_minions():
    basepath = os.path.dirname(os.path.realpath(__file__))
    crawlers = [f for f in os.listdir('crawlers/') if f.endswith('exjobb.py')]
    #print(*crawlers, sep='\n')
    total_list_thesis = []
    for crawler in crawlers:

        module = imp.load_source(crawler[:-3], basepath + '/crawlers/' + crawler)

        result = module.crawl()
        total_list_thesis += result

    print(total_list_thesis)
    return total_list_thesis

def print_to_json(data):
    with open('exjobb.json', 'w') as f:
        json.dump(data, f, ensure_ascii=False,indent=4, sort_keys=True)
    print('{} written to file'.format(len(data)))

if __name__ == '__main__':
    #call_minions()
    #results = call_minions()
    results = [{'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/58490701/diploma-work', 'title': 'Diploma Work'}, {'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/57145538/thesis-work-in-control-optimization-and-analytics', 'title': 'Thesis work in Control- Optimization and Analytics'}, {'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/57576475/thesis-work-in-software-development', 'title': 'Thesis Work in Software Development'}, {'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/55417627/thesis-work-in-electric-power-systems', 'title': 'Thesis Work in Electric Power Systems'}, {'company': 'ABB', 'location': 'Västerås\nVästmanlands län\nSverige', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/58293509/examensarbete-inom-hr-kandidatupplevelse', 'title': 'Examensarbete inom HR - kandidatupplevelse'}, {'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/57970395/master-thesis-project-5-positions-at-abb-software-and-communications-for-smart-home-towards-internet-of-things-services-and-people', 'title': 'Master Thesis Project (5 positions) at ABB– Software and Communications for Smart Home towards Internet of Things, Services and People'}, {'company': 'Astra Zeneca', 'location': 'Sweden (Gothenburg)', 'link': 'http://jobs.astrazeneca.com/jobs/details/l1rGOT0000004U-diploma-worker-30-hp-astrazeneca-gothenburg', 'title': 'Diploma Worker, 30 hp AstraZeneca Gothenburg'}, {'company': 'Astra Zeneca', 'location': 'Sweden (Gothenburg)', 'link': 'http://jobs.astrazeneca.com/jobs/details/l1rGOT0000004J-diploma-worker-astrazeneca-in-gothenburg', 'title': 'Diploma Worker AstraZeneca in Gothenburg'}, {'company': 'Billerud', 'location': 'Solna', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1371393/14449', 'title': 'Expression of interest - Thesis Project at BillerudKorsnäs Head Office'}, {'company': 'Billerud', 'location': 'Gävle', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415116/99425', 'title': 'Expression of interest - Thesis Project at Gävle'}, {'company': 'Billerud', 'location': 'Skärblacka', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415130/99397', 'title': 'Expression of interest - Thesis Project at Skärblacka'}, {'company': 'Billerud', 'location': 'Karlsborg', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415158/99399', 'title': 'Expression of interest - Thesis Project at Karlsborg'}, {'company': 'Billerud', 'location': 'Gruvön', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415184/99395', 'title': 'Expression of interest - Thesis Project at Gruvön'}, {'company': 'Billerud', 'location': 'Frövi/Rockhammar', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415194/99383', 'title': 'Expression of interest - Thesis Project at Frövi/Rockhammar'}, {'company': 'Billerud', 'location': 'Pietarsaari/Tervasaari', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1433962/99401', 'title': 'Expression of interest - Thesis Project Finland'}, {'company': 'Boliden', 'location': ' Rönnskär, Sweden ', 'link': 'https://boliden.csod.com/ats/careersite/JobDetails.aspx?id=749', 'title': 'Development/Laboratory: Determination of measurement uncertainty'}, {'company': 'Boliden', 'location': ' Rönnskär, Sweden ', 'link': 'https://boliden.csod.com/ats/careersite/JobDetails.aspx?id=746', 'title': 'Development/Laboratory: XRF-analysis in liquids and the use of internal standard'}, {'company': 'Boliden', 'location': ' Boliden, Sweden ', 'link': 'https://boliden.csod.com/ats/careersite/JobDetails.aspx?id=662', 'title': 'Simulation and Control of Clarification-thickeners'}, {'company': 'Ericsson', 'location': 'Stockholm, Stockholm, SE', 'link': 'https://jobs.ericsson.com/job/Stockholm-Master-Thesis-Advanced-Business-Models-in-an-Outsourced-Environment/331298100/', 'title': 'Master Thesis - Advanced Business Models in an Outsourced Environment'}, {'company': 'Ericsson', 'location': 'Stockholm, Stockholm, SE', 'link': 'https://jobs.ericsson.com/job/Stockholm-Master%E2%80%99s-Thesis%2C-Next-Generation-Video-Compression/326052400/', 'title': 'Master’s Thesis, Next-Generation Video Compression'}, {'company': 'Ericsson', 'location': 'Stockholm, Stockholm, SE', 'link': 'https://jobs.ericsson.com/job/Stockholm-Master%E2%80%99s-Thesis%2C-HEVC-Video-Encoder-Improvements/326052000/', 'title': 'Master’s Thesis, HEVC Video Encoder Improvements'}, {'company': 'Ericsson', 'location': 'Lund, Skåne, SE', 'link': 'https://jobs.ericsson.com/job/Lund-Master-Thesis-Wide-band-PA-for-Small-Cell-Radio-Base-Station/331788000/', 'title': 'Master Thesis - Wide-band PA for Small Cell Radio Base Station'}, {'company': 'Göteborgs Energi', 'location': 'Gothenburg', 'link': 'http://www.goteborgenergi.se/Files/dok/Examensarbete%20Personalstaben%20CSR.pdf?TS=635627100191556499', 'title': 'CSR-arbete inom medelstora företag (medelstora företags perspektiv på hållbarhet)'}, {'company': 'SAAB', 'location': 'Karlskoga', 'link': 'http://saabgroup.com/sv/career/job-opportunities/examensarbete-initiering-av-84-mm-ammunition/', 'title': 'Examensarbete; Initiering av 84 mm ammunition'}, {'company': 'SAAB', 'location': 'Karlskoga', 'link': 'http://saabgroup.com/sv/career/job-opportunities/examensarbete--livslangdsteknik/', 'title': 'Examensarbete Livslängdsteknik'}, {'company': 'SAAB', 'location': 'Järfälla', 'link': 'http://saabgroup.com/sv/career/job-opportunities/examensarbete-portering-realtidsexekutiv/', 'title': 'Examensarbete: Portering realtidsexekutiv'}, {'company': 'Sandvik', 'location': 'Sandviken', 'link': 'http://www.home.sandvik/se/karriar/student/examensarbete/examensarbeten/undersoka-magnetiska-egenskaper-hos-olika-legeringar/', 'title': 'Undersöka magnetiska egenskaper hos olika legeringar'}, {'company': 'Scania', 'location': 'Södertälje', 'link': 'http://jobsearch.scania.com/segerjoblist/presentation.aspx?presGrpId=8304&langId=1&ie=False', 'title': '30 credits - Wheel brake noise analysis - criteria’s and methods'}, {'company': 'Scania', 'location': 'Södertälje', 'link': 'http://jobsearch.scania.com/segerjoblist/presentation.aspx?presGrpId=7531&langId=2&ie=False', 'title': '30 credits - Automatic detection of function variability'}, {'company': 'Sweco', 'location': '', 'link': 'http://www.sweco.se/karriar/lediga-jobb/examensarbete-inom-byggkonstruktion2/', 'title': 'Examensarbete inom Byggkonstruktion'}, {'company': 'Sweco', 'location': '', 'link': 'http://www.sweco.se/karriar/lediga-jobb/exjobb-inom-systemutveckling-geodata-eller-bim---informationssamordning7/', 'title': 'Exjobb inom systemutveckling, geodata eller BIM- & informationssamordning'}, {'company': 'Tetra Pak', 'location': 'Sweden-Skane-Lund', 'link': 'https://tetrapak.taleo.net/careersection/3/jobdetail.ftl?job=LUN00016H', 'title': 'OPEN APPLICATION FOR BACHELOR/MASTER THESIS - SWEDEN'}, {'company': 'Vattenfall', 'location': 'Stockholm (Solna)', 'link': 'https://corporate.vattenfall.se/jobba-hos-oss/jobb/lediga-jobb/master-thesis-project-in-power-technology/', 'title': 'Master thesis project in Power Technology'}, {'company': 'Volvo Cars', 'location': 'Gothenburg , Sweden', 'link': 'http://www.volvocars.com/intl/about/our-company/careers/job-search/jobs/rd16165', 'title': 'Thesis - Software Engineering in Traditional Manufacturing Organizations'}, {'company': 'Volvo Cars', 'location': 'Gothenburg , Sweden', 'link': 'http://www.volvocars.com/intl/about/our-company/careers/job-search/jobs/rd16163', 'title': 'Master Thesis - Road Friction Prediction Using Deep Learning'}, {'company': 'Volvo Cars', 'location': 'Gothenburg , Sweden', 'link': 'http://www.volvocars.com/intl/about/our-company/careers/job-search/jobs/rd16084', 'title': 'Thesis: Offline Active Safety Sensor Data Processing Parameter Estimation'}, {'link': 'https://xjobs.brassring.com/TGWebHost/searchresults.aspx?partnerid=25079&siteid=5171&Codes=Volvo&AgentID=9780452&Function=runquery', 'location': 'Göteborg', 'company': 'Volvo Group', 'title': 'Thesis worker'}, {'link': 'https://xjobs.brassring.com/TGWebHost/searchresults.aspx?partnerid=25079&siteid=5171&Codes=Volvo&AgentID=9780452&Function=runquery', 'location': 'Göteborg', 'company': 'Volvo Group', 'title': 'Interaction Designer in Marine Environment'}]
    update_mongodb.update_database(results)
    #print_to_json(results)





#[{'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/58490701/diploma-work', 'title': 'Diploma Work'}, {'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/57145538/thesis-work-in-control-optimization-and-analytics', 'title': 'Thesis work in Control- Optimization and Analytics'}, {'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/57576475/thesis-work-in-software-development', 'title': 'Thesis Work in Software Development'}, {'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/55417627/thesis-work-in-electric-power-systems', 'title': 'Thesis Work in Electric Power Systems'}, {'company': 'ABB', 'location': 'Västerås\nVästmanlands län\nSverige', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/58293509/examensarbete-inom-hr-kandidatupplevelse', 'title': 'Examensarbete inom HR - kandidatupplevelse'}, {'company': 'ABB', 'location': 'Västerås\nVaestmanland County\nSweden', 'link': 'http://new.abb.com/se/jobba-hos-oss/jobbannonser/details/57970395/master-thesis-project-5-positions-at-abb-software-and-communications-for-smart-home-towards-internet-of-things-services-and-people', 'title': 'Master Thesis Project (5 positions) at ABB– Software and Communications for Smart Home towards Internet of Things, Services and People'}, {'company': 'Astra Zeneca', 'location': 'Sweden (Gothenburg)', 'link': 'http://jobs.astrazeneca.com/jobs/details/l1rGOT0000004U-diploma-worker-30-hp-astrazeneca-gothenburg', 'title': 'Diploma Worker, 30 hp AstraZeneca Gothenburg'}, {'company': 'Astra Zeneca', 'location': 'Sweden (Gothenburg)', 'link': 'http://jobs.astrazeneca.com/jobs/details/l1rGOT0000004J-diploma-worker-astrazeneca-in-gothenburg', 'title': 'Diploma Worker AstraZeneca in Gothenburg'}, {'company': 'Billerud', 'location': 'Solna', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1371393/14449', 'title': 'Expression of interest - Thesis Project at BillerudKorsnäs Head Office'}, {'company': 'Billerud', 'location': 'Gävle', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415116/99425', 'title': 'Expression of interest - Thesis Project at Gävle'}, {'company': 'Billerud', 'location': 'Skärblacka', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415130/99397', 'title': 'Expression of interest - Thesis Project at Skärblacka'}, {'company': 'Billerud', 'location': 'Karlsborg', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415158/99399', 'title': 'Expression of interest - Thesis Project at Karlsborg'}, {'company': 'Billerud', 'location': 'Gruvön', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415184/99395', 'title': 'Expression of interest - Thesis Project at Gruvön'}, {'company': 'Billerud', 'location': 'Frövi/Rockhammar', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1415194/99383', 'title': 'Expression of interest - Thesis Project at Frövi/Rockhammar'}, {'company': 'Billerud', 'location': 'Pietarsaari/Tervasaari', 'link': 'https://billerudkorsnas.easycruit.com/intranet/exjobb/vacancy/1433962/99401', 'title': 'Expression of interest - Thesis Project Finland'}, {'company': 'Boliden', 'location': ' Rönnskär, Sweden ', 'link': 'https://boliden.csod.com/ats/careersite/JobDetails.aspx?id=749', 'title': 'Development/Laboratory: Determination of measurement uncertainty'}, {'company': 'Boliden', 'location': ' Rönnskär, Sweden ', 'link': 'https://boliden.csod.com/ats/careersite/JobDetails.aspx?id=746', 'title': 'Development/Laboratory: XRF-analysis in liquids and the use of internal standard'}, {'company': 'Boliden', 'location': ' Boliden, Sweden ', 'link': 'https://boliden.csod.com/ats/careersite/JobDetails.aspx?id=662', 'title': 'Simulation and Control of Clarification-thickeners'}, {'company': 'Ericsson', 'location': 'Stockholm, Stockholm, SE', 'link': 'https://jobs.ericsson.com/job/Stockholm-Master-Thesis-Advanced-Business-Models-in-an-Outsourced-Environment/331298100/', 'title': 'Master Thesis - Advanced Business Models in an Outsourced Environment'}, {'company': 'Ericsson', 'location': 'Stockholm, Stockholm, SE', 'link': 'https://jobs.ericsson.com/job/Stockholm-Master%E2%80%99s-Thesis%2C-Next-Generation-Video-Compression/326052400/', 'title': 'Master’s Thesis, Next-Generation Video Compression'}, {'company': 'Ericsson', 'location': 'Stockholm, Stockholm, SE', 'link': 'https://jobs.ericsson.com/job/Stockholm-Master%E2%80%99s-Thesis%2C-HEVC-Video-Encoder-Improvements/326052000/', 'title': 'Master’s Thesis, HEVC Video Encoder Improvements'}, {'company': 'Ericsson', 'location': 'Lund, Skåne, SE', 'link': 'https://jobs.ericsson.com/job/Lund-Master-Thesis-Wide-band-PA-for-Small-Cell-Radio-Base-Station/331788000/', 'title': 'Master Thesis - Wide-band PA for Small Cell Radio Base Station'}, {'company': 'Göteborgs Energi', 'location': 'Gothenburg', 'link': 'http://www.goteborgenergi.se/Files/dok/Examensarbete%20Personalstaben%20CSR.pdf?TS=635627100191556499', 'title': 'CSR-arbete inom medelstora företag (medelstora företags perspektiv på hållbarhet)'}, {'company': 'SAAB', 'location': 'Karlskoga', 'link': 'http://saabgroup.com/sv/career/job-opportunities/examensarbete-initiering-av-84-mm-ammunition/', 'title': 'Examensarbete; Initiering av 84 mm ammunition'}, {'company': 'SAAB', 'location': 'Karlskoga', 'link': 'http://saabgroup.com/sv/career/job-opportunities/examensarbete--livslangdsteknik/', 'title': 'Examensarbete Livslängdsteknik'}, {'company': 'SAAB', 'location': 'Järfälla', 'link': 'http://saabgroup.com/sv/career/job-opportunities/examensarbete-portering-realtidsexekutiv/', 'title': 'Examensarbete: Portering realtidsexekutiv'}, {'company': 'Sandvik', 'location': 'Sandviken', 'link': 'http://www.home.sandvik/se/karriar/student/examensarbete/examensarbeten/undersoka-magnetiska-egenskaper-hos-olika-legeringar/', 'title': 'Undersöka magnetiska egenskaper hos olika legeringar'}, {'company': 'Scania', 'location': 'Södertälje', 'link': 'http://jobsearch.scania.com/segerjoblist/presentation.aspx?presGrpId=8304&langId=1&ie=False', 'title': '30 credits - Wheel brake noise analysis - criteria’s and methods'}, {'company': 'Scania', 'location': 'Södertälje', 'link': 'http://jobsearch.scania.com/segerjoblist/presentation.aspx?presGrpId=7531&langId=2&ie=False', 'title': '30 credits - Automatic detection of function variability'}, {'company': 'Sweco', 'location': '', 'link': 'http://www.sweco.se/karriar/lediga-jobb/examensarbete-inom-byggkonstruktion2/', 'title': 'Examensarbete inom Byggkonstruktion'}, {'company': 'Sweco', 'location': '', 'link': 'http://www.sweco.se/karriar/lediga-jobb/exjobb-inom-systemutveckling-geodata-eller-bim---informationssamordning7/', 'title': 'Exjobb inom systemutveckling, geodata eller BIM- & informationssamordning'}, {'company': 'Tetra Pak', 'location': 'Sweden-Skane-Lund', 'link': 'https://tetrapak.taleo.net/careersection/3/jobdetail.ftl?job=LUN00016H', 'title': 'OPEN APPLICATION FOR BACHELOR/MASTER THESIS - SWEDEN'}, {'company': 'Vattenfall', 'location': 'Stockholm (Solna)', 'link': 'https://corporate.vattenfall.se/jobba-hos-oss/jobb/lediga-jobb/master-thesis-project-in-power-technology/', 'title': 'Master thesis project in Power Technology'}, {'company': 'Volvo Cars', 'location': 'Gothenburg , Sweden', 'link': 'http://www.volvocars.com/intl/about/our-company/careers/job-search/jobs/rd16165', 'title': 'Thesis - Software Engineering in Traditional Manufacturing Organizations'}, {'company': 'Volvo Cars', 'location': 'Gothenburg , Sweden', 'link': 'http://www.volvocars.com/intl/about/our-company/careers/job-search/jobs/rd16163', 'title': 'Master Thesis - Road Friction Prediction Using Deep Learning'}, {'company': 'Volvo Cars', 'location': 'Gothenburg , Sweden', 'link': 'http://www.volvocars.com/intl/about/our-company/careers/job-search/jobs/rd16084', 'title': 'Thesis: Offline Active Safety Sensor Data Processing Parameter Estimation'}, {'link': 'https://xjobs.brassring.com/TGWebHost/searchresults.aspx?partnerid=25079&siteid=5171&Codes=Volvo&AgentID=9780452&Function=runquery', 'location': 'Göteborg', 'company': 'Volvo Group', 'title': 'Thesis worker'}, {'link': 'https://xjobs.brassring.com/TGWebHost/searchresults.aspx?partnerid=25079&siteid=5171&Codes=Volvo&AgentID=9780452&Function=runquery', 'location': 'Göteborg', 'company': 'Volvo Group', 'title': 'Interaction Designer in Marine Environment'}]
